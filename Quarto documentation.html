<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-06-14">

<title>Documentation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Quarto documentation_files/libs/clipboard/clipboard.min.js"></script>
<script src="Quarto documentation_files/libs/quarto-html/quarto.js"></script>
<script src="Quarto documentation_files/libs/quarto-html/popper.min.js"></script>
<script src="Quarto documentation_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Quarto documentation_files/libs/quarto-html/anchor.min.js"></script>
<link href="Quarto documentation_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Quarto documentation_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Quarto documentation_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Quarto documentation_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Quarto documentation_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body>

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Documentation</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 14, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul class="collapse">
  <li><a href="#source-work-results" id="toc-source-work-results" class="nav-link active" data-scroll-target="#source-work-results"><span class="header-section-number">1</span> Source work results</a></li>
  <li><a href="#reproduced-work-results" id="toc-reproduced-work-results" class="nav-link" data-scroll-target="#reproduced-work-results"><span class="header-section-number">2</span> Reproduced work results</a></li>
  <li><a href="#enhanced-approach-to-the-topic" id="toc-enhanced-approach-to-the-topic" class="nav-link" data-scroll-target="#enhanced-approach-to-the-topic"><span class="header-section-number">3</span> Enhanced approach to the topic</a></li>
  <li><a href="#to-be-continued" id="toc-to-be-continued" class="nav-link" data-scroll-target="#to-be-continued"><span class="header-section-number">4</span> TO BE CONTINUED</a></li>
  </ul>
</nav>
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="source-work-results" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="source-work-results"><span class="header-section-number">1</span> Source work results</h2>
<p>In order to reproduce the source work of 2021 for classes in the subject of Econometrics, the results of which are as follows:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
=====================================================================
                                             Dependent variable:     
                                        -----------------------------
                                        smiertelnosc wsrod noworodkow
---------------------------------------------------------------------
log GDP                                           -0.410***          
                                                   (0.044)           
                                                                     
log GDP per capita                                0.104***           
                                                   (0.032)           
                                                                     
log populacji                                     -0.521***          
                                                   (0.102)           
                                                                     
log wydatkow panstwa na ochrone zdrowia           -0.154***          
                                                   (0.039)           
                                                                     
log liczby turystow                                0.217**           
                                                   (0.089)           
                                                                     
% ludzi mieszkajacych w miastach                  7.489***           
                                                   (0.473)           
                                                                     
---------------------------------------------------------------------
Observations                                         123             
R2                                                  0.841            
Adjusted R2                                         0.834            
Residual Std. Error                           0.398 (df = 117)       
F Statistic                               123.463*** (df = 5; 117)   
=====================================================================
Note:                                     *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01</code></pre>
</div>
</div>
</section>
<section id="reproduced-work-results" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="reproduced-work-results"><span class="header-section-number">2</span> Reproduced work results</h2>
<p>in the first step, we decided to reproduce the code 1:1 in Python so as to try to get as identical results as possible</p>
<p>The detailed code can be found in our repository in the file https://github.com/michal-kunstler/RR_project_JD_JR_MK/python_replication.ipynb. In this document, we will focus only on the most important conclusions of the analysis.</p>
<div class="cell">
<div class="cell-output-display">
<table class="simpletable table table-sm table-striped small" data-quarto-postprocess="true">
<caption>OLS Regression Results</caption>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dep. Variable:</td>
<td>l_noworodki</td>
<td data-quarto-table-cell-role="th">R-squared:</td>
<td>0.803</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Model:</td>
<td>OLS</td>
<td data-quarto-table-cell-role="th">Adj. R-squared:</td>
<td>0.795</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Method:</td>
<td>Least Squares</td>
<td data-quarto-table-cell-role="th">F-statistic:</td>
<td>97.29</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Date:</td>
<td>śr., 14 cze 2023</td>
<td data-quarto-table-cell-role="th">Prob (F-statistic):</td>
<td>2.36e-40</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Time:</td>
<td>00:02:34</td>
<td data-quarto-table-cell-role="th">Log-Likelihood:</td>
<td>-75.436</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">No. Observations:</td>
<td>125</td>
<td data-quarto-table-cell-role="th">AIC:</td>
<td>162.9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Df Residuals:</td>
<td>119</td>
<td data-quarto-table-cell-role="th">BIC:</td>
<td>179.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Df Model:</td>
<td>5</td>
<td data-quarto-table-cell-role="th"></td>
<td></td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Covariance Type:</td>
<td>nonrobust</td>
<td data-quarto-table-cell-role="th"></td>
<td></td>
</tr>
</tbody>
</table>
<table class="simpletable table table-sm table-striped small" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td></td>
<td data-quarto-table-cell-role="th">coef</td>
<td data-quarto-table-cell-role="th">std err</td>
<td data-quarto-table-cell-role="th">t</td>
<td data-quarto-table-cell-role="th">P&gt;|t|</td>
<td data-quarto-table-cell-role="th">[0.025</td>
<td data-quarto-table-cell-role="th">0.975]</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">const</td>
<td>7.6734</td>
<td>0.508</td>
<td>15.108</td>
<td>0.000</td>
<td>6.668</td>
<td>8.679</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">l_GDPpc</td>
<td>-0.4050</td>
<td>0.051</td>
<td>-8.003</td>
<td>0.000</td>
<td>-0.505</td>
<td>-0.305</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">l_populacja</td>
<td>0.0965</td>
<td>0.035</td>
<td>2.753</td>
<td>0.007</td>
<td>0.027</td>
<td>0.166</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">l_ochrona_zdrowia</td>
<td>-0.3618</td>
<td>0.111</td>
<td>-3.267</td>
<td>0.001</td>
<td>-0.581</td>
<td>-0.142</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">l_turysci</td>
<td>-0.1814</td>
<td>0.043</td>
<td>-4.175</td>
<td>0.000</td>
<td>-0.267</td>
<td>-0.095</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">HIV</td>
<td>0.2305</td>
<td>0.096</td>
<td>2.404</td>
<td>0.018</td>
<td>0.041</td>
<td>0.420</td>
</tr>
</tbody>
</table>
<table class="simpletable table table-sm table-striped small" data-quarto-postprocess="true">
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Omnibus:</td>
<td>1.457</td>
<td data-quarto-table-cell-role="th">Durbin-Watson:</td>
<td>2.164</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Prob(Omnibus):</td>
<td>0.483</td>
<td data-quarto-table-cell-role="th">Jarque-Bera (JB):</td>
<td>0.990</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Skew:</td>
<td>-0.164</td>
<td data-quarto-table-cell-role="th">Prob(JB):</td>
<td>0.609</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Kurtosis:</td>
<td>3.287</td>
<td data-quarto-table-cell-role="th">Cond. No.</td>
<td>299.</td>
</tr>
</tbody>
</table>
<br><br>Notes:<br>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
</div>
</div>
<p>Despite our efforts, it was not possible to perfectly replicate the estimated results. We believe this is most likely due to the source study’s method of removing rows based on indices from the Residuals vs Leverage plot. When transcribing the code to Python and utilizing the get_influence function, the code points to indices of completely different observations than those in the original code. We decided to stick with the removal of the original observation indices.</p>
<p>After conducting a procedure from the general to the specific, we obtained exactly the same significant variables as in the original model in R. Nevertheless, the estimates of the Beta parameters differ slightly. The largest observed difference is for the variable l_ochrona zdrowia (l_ochrona_z) -&gt; <strong>-0.52 </strong> (original, R) vs <strong>-0.36 </strong> (Python) which is absolute differnce equal to <strong>0.16 </strong>. In other cases, the differences are not large, and the consistency in the direction of estimates between R and Python is also encouraging.</p>
</section>
<section id="enhanced-approach-to-the-topic" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="enhanced-approach-to-the-topic"><span class="header-section-number">3</span> Enhanced approach to the topic</h2>
<p>Upon acquiring advanced econometric and programming skills during our master’s studies, we decided to enhance the code written over two years ago, aiming for maximum automation and improved econometric accuracy.</p>
<p>Please note that our primary intention was not to perfect this model in terms of the approach taken, such as using superior or more recent data, or potentially more suitable models like panel data models. Our primary objective in devising this approach was automation and reproducibility of results, and we primarily directed our attention towards these aspects.</p>
<p>In the initial step, we computed the Variance Inflation Factor (VIF) and eliminated collinear variables (VIF &gt; 10) from the model.</p>
<p>Despite the VIF coefficient being relatively low, we considered that the values for GDP and GDP per capita should not both remain in the model. Consequently, we also removed the GDP variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_vif(Xx):</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    vif_data <span class="op">=</span> pd.DataFrame()</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    vif_data[<span class="st">"feature"</span>] <span class="op">=</span> Xx.columns</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    vif_data[<span class="st">"VIF"</span>] <span class="op">=</span> [variance_inflation_factor(Xx.values, i)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                            <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(Xx.columns))]</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    lider <span class="op">=</span> vif_data.sort_values(by <span class="op">=</span> <span class="st">'VIF'</span>, ascending<span class="op">=</span> <span class="va">False</span>).iloc[<span class="dv">0</span>,]</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(lider, vif_data)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (lider.VIF <span class="op">&gt;</span> <span class="dv">10</span>):</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        col <span class="op">=</span> lider.feature</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        Xx <span class="op">=</span> Xx.drop(columns<span class="op">=</span> [col])</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        calculate_vif(Xx)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>vif_data <span class="op">=</span> calculate_vif(Xx)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(vif_data)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.drop(columns <span class="op">=</span> [<span class="st">'ochrona_zdrowia'</span>,  <span class="st">'labor_force'</span>])</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.drop(columns <span class="op">=</span> [<span class="st">'GDP'</span>])</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>feature    labor_force
VIF            30.6245
Name: 5, dtype: object            feature        VIF
0        noworodki   2.789237
1  ochrona_zdrowia  12.060030
2            GDPpc   3.129436
3              GDP   3.451977
4        populacja  26.720347
5      labor_force  30.624500
6       death_rate   8.099559
7        urban_pop   9.358728
8          turysci   2.703658
9              HIV   2.297961
feature    ochrona_zdrowia
VIF              11.856304
Name: 1, dtype: object            feature        VIF
0        noworodki   2.781260
1  ochrona_zdrowia  11.856304
2            GDPpc   3.097999
3              GDP   2.849485
4        populacja   1.832936
5       death_rate   8.057869
6        urban_pop   9.217044
7          turysci   2.697108
8              HIV   2.297613
feature    urban_pop
VIF         7.221372
Name: 5, dtype: object       feature       VIF
0   noworodki  2.733857
1       GDPpc  3.011122
2         GDP  2.602443
3   populacja  1.752073
4  death_rate  5.786262
5   urban_pop  7.221372
6     turysci  2.696949
7         HIV  2.294471
None</code></pre>
</div>
</div>
<p>Subsequently, prior to the random logarithmization of numerical variables, we calculated the values of the Shapiro-Wilk test for variables both before and after logarithmization. We retained in our database those variables for which the p-value was higher (comparing before versus after logarithmization).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># shapiro test for pre-log variables</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>statss <span class="op">=</span> []</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> column <span class="kw">in</span> df.columns:</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  stat, p <span class="op">=</span> shapiro(df[column])</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">'Shapiro-Wilk for </span><span class="sc">{}</span><span class="st">: </span><span class="sc">{:.3f}</span><span class="st">, p-value: </span><span class="sc">{:.3f}</span><span class="st">'</span>.<span class="bu">format</span>(column, stat, p))</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  statss.append(p)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># shapiro test for logged variables</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> logsy(df, cols<span class="op">=</span>[]):</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> cols:</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">'log_'</span><span class="op">+</span><span class="bu">str</span>(col)] <span class="op">=</span> np.log(df[col])</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> df.drop(columns<span class="op">=</span>[col])</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'-'</span><span class="op">*</span><span class="dv">50</span>)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> df.copy()</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>cols <span class="op">=</span> df1.columns</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> logsy(df1,cols)</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>statss1 <span class="op">=</span> []</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> column <span class="kw">in</span> df1.columns:</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>  stat, p <span class="op">=</span> shapiro(df1[column])</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">'Shapiro-Wilk for </span><span class="sc">{}</span><span class="st">: </span><span class="sc">{:.3f}</span><span class="st">, p-value: </span><span class="sc">{:.3f}</span><span class="st">'</span>.<span class="bu">format</span>(column, stat, p))</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  statss1.append(p)</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Shapiro-Wilk for noworodki: 0.790, p-value: 0.000
Shapiro-Wilk for GDPpc: 0.756, p-value: 0.000
Shapiro-Wilk for populacja: 0.241, p-value: 0.000
Shapiro-Wilk for death_rate: 0.973, p-value: 0.008
Shapiro-Wilk for urban_pop: 0.965, p-value: 0.001
Shapiro-Wilk for turysci: 0.608, p-value: 0.000
Shapiro-Wilk for HIV: 0.605, p-value: 0.000
--------------------------------------------------
Shapiro-Wilk for log_noworodki: 0.970, p-value: 0.004
Shapiro-Wilk for log_GDPpc: 0.979, p-value: 0.033
Shapiro-Wilk for log_populacja: 0.990, p-value: 0.420
Shapiro-Wilk for log_death_rate: 0.934, p-value: 0.000
Shapiro-Wilk for log_urban_pop: 0.897, p-value: 0.000
Shapiro-Wilk for log_turysci: 0.980, p-value: 0.042
Shapiro-Wilk for log_HIV: nan, p-value: 1.000</code></pre>
</div>
</div>
<p>Following that, we authored code which automatically carries out a general-to-specific procedure for the processed database, thereby deriving the final form of the model:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>models <span class="op">=</span> {}</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>models_summary <span class="op">=</span> {}</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>drop_order <span class="op">=</span> [<span class="st">'Intercept'</span>]</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> GTS_iter(df):</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    X <span class="op">=</span> df3.drop(columns<span class="op">=</span>[<span class="st">'log_noworodki'</span>])</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> df3[<span class="st">'log_noworodki'</span>]</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> model_creator(X,y):</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        string <span class="op">=</span> <span class="st">''</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> col <span class="kw">in</span> X.columns:</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> string <span class="op">+</span> <span class="bu">str</span>(col) <span class="op">+</span> <span class="st">'+'</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">str</span>(y.name)<span class="op">+</span><span class="st">'~'</span> <span class="op">+</span> string[:<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    model_formula <span class="op">=</span> model_creator(X,y)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    X[<span class="st">"log_noworodki"</span>] <span class="op">=</span> y</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    model<span class="op">=</span> smf.ols(model_formula , X).fit()</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(model)</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> GTS_iter(df3)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>models[<span class="st">'model_1'</span>] <span class="op">=</span> model</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>models_summary[<span class="st">'model_1'</span>] <span class="op">=</span> model.summary()</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> model.pvalues.<span class="bu">max</span>() <span class="op">&gt;</span> <span class="fl">0.05</span>:</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    i<span class="op">+=</span><span class="dv">1</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>    max_pvalue <span class="op">=</span> model.pvalues.idxmax()</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>((max_pvalue <span class="op">==</span> <span class="st">'Intercept'</span>)):</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>((model.pvalues.sort_values(ascending <span class="op">=</span> <span class="va">False</span>)[<span class="dv">1</span>] <span class="op">&gt;</span> <span class="fl">0.05</span>)):</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>            max_pvalue <span class="op">=</span> model.pvalues.sort_values(ascending <span class="op">=</span> <span class="va">False</span>).index[<span class="dv">1</span>]</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    df3 <span class="op">=</span> df3.drop(columns<span class="op">=</span>[max_pvalue], axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>    drop_order.append(max_pvalue)</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> GTS_iter(df3)</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>    models_summary[<span class="ss">f'model_</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">'</span>] <span class="op">=</span> model.summary()</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>    models[<span class="ss">f'model_</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">'</span>] <span class="op">=</span> model</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> df3.drop(columns<span class="op">=</span>[<span class="st">"log_noworodki"</span>]).columns:    </span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>    drop_order.append(col)</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For which, we subsequently conducted diagnostic tests and due to the issue of heteroskedasticity of residuals in the model, we applied a robust covariance matrix:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">### diagnostics</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>final_model <span class="op">=</span> <span class="bu">list</span>(models.values())[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>name <span class="op">=</span> [<span class="st">"Lagrange multiplier statistic"</span>, <span class="st">"p-value"</span>, <span class="st">"f-value"</span>, <span class="st">"f p-value"</span>]</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> sms.het_breuschpagan(final_model.resid, final_model.model.exog)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">str</span>(<span class="st">'-'</span>)<span class="op">*</span><span class="dv">50</span>,<span class="st">'</span><span class="ch">\n</span><span class="st">BP TEST:</span><span class="ch">\n</span><span class="st">'</span> , lzip(name, test))</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">str</span>(<span class="st">'-'</span>)<span class="op">*</span><span class="dv">50</span>,<span class="st">'</span><span class="ch">\n</span><span class="st">RESET TEST:</span><span class="ch">\n</span><span class="st">'</span> ,ssd.linear_reset(final_model, power<span class="op">=</span><span class="dv">3</span>, test_type<span class="op">=</span><span class="st">'fitted'</span>, use_f<span class="op">=</span><span class="va">False</span>, cov_type<span class="op">=</span><span class="st">'nonrobust'</span>, cov_kwargs<span class="op">=</span><span class="va">None</span>))</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">str</span>(<span class="st">'-'</span>)<span class="op">*</span><span class="dv">50</span>,<span class="st">'</span><span class="ch">\n</span><span class="st">Jarque Bera TEST:</span><span class="ch">\n</span><span class="st">'</span> ,scys.jarque_bera(final_model.resid))</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> sns.histplot(final_model.resid, log_scale<span class="op">=</span><span class="va">False</span>, kde<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">'maroon'</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>x.set_title(<span class="st">'Residuals histogram'</span>, fontdict<span class="op">=</span>{<span class="st">'fontsize'</span>:<span class="dv">20</span>})</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">### Roboust matrix </span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>cov_matrix <span class="op">=</span> sm.stats.sandwich_covariance.cov_white_simple(final_model, use_correction<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>robust_results <span class="op">=</span> final_model.get_robustcov_results(cov_type<span class="op">=</span><span class="st">'HC1'</span>)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(final_model.summary())</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(robust_results.summary())</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>-------------------------------------------------- 
BP TEST:
 [('Lagrange multiplier statistic', 20.224680836172354), ('p-value', 0.0011340204142105755), ('f-value', 4.546245389467802), ('f p-value', 0.0007504683122038887)]
-------------------------------------------------- 
RESET TEST:
 &lt;Wald test (chi2): statistic=6.05792289993655, p-value=0.048365842398888526, df_denom=2&gt;
-------------------------------------------------- 
Jarque Bera TEST:
 Jarque_beraResult(statistic=0.49592185719087684, pvalue=0.7803904336327284)</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Quarto-documentation_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:          log_noworodki   R-squared:                       0.812
Model:                            OLS   Adj. R-squared:                  0.805
Method:                 Least Squares   F-statistic:                     111.6
Date:                śr., 14 cze 2023   Prob (F-statistic):           4.20e-45
Time:                        00:02:52   Log-Likelihood:                -79.569
No. Observations:                 135   AIC:                             171.1
Df Residuals:                     129   BIC:                             188.6
Df Model:                           5                                         
Covariance Type:            nonrobust                                         
=================================================================================
                    coef    std err          t      P&gt;|t|      [0.025      0.975]
---------------------------------------------------------------------------------
Intercept         7.7539      0.492     15.773      0.000       6.781       8.726
log_GDPpc        -0.4494      0.046     -9.702      0.000      -0.541      -0.358
log_populacja     0.0922      0.034      2.711      0.008       0.025       0.159
death_rate       -0.0562      0.013     -4.200      0.000      -0.083      -0.030
log_turysci      -0.1717      0.042     -4.120      0.000      -0.254      -0.089
HIV               0.2655      0.093      2.865      0.005       0.082       0.449
==============================================================================
Omnibus:                        0.862   Durbin-Watson:                   2.162
Prob(Omnibus):                  0.650   Jarque-Bera (JB):                0.496
Skew:                           0.107   Prob(JB):                        0.780
Kurtosis:                       3.206   Cond. No.                         322.
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
                            OLS Regression Results                            
==============================================================================
Dep. Variable:          log_noworodki   R-squared:                       0.812
Model:                            OLS   Adj. R-squared:                  0.805
Method:                 Least Squares   F-statistic:                     145.6
Date:                śr., 14 cze 2023   Prob (F-statistic):           2.82e-51
Time:                        00:02:52   Log-Likelihood:                -79.569
No. Observations:                 135   AIC:                             171.1
Df Residuals:                     129   BIC:                             188.6
Df Model:                           5                                         
Covariance Type:                  HC1                                         
=================================================================================
                    coef    std err          t      P&gt;|t|      [0.025      0.975]
---------------------------------------------------------------------------------
Intercept         7.7539      0.462     16.793      0.000       6.840       8.667
log_GDPpc        -0.4494      0.043    -10.365      0.000      -0.535      -0.364
log_populacja     0.0922      0.036      2.564      0.011       0.021       0.163
death_rate       -0.0562      0.013     -4.193      0.000      -0.083      -0.030
log_turysci      -0.1717      0.039     -4.457      0.000      -0.248      -0.095
HIV               0.2655      0.094      2.838      0.005       0.080       0.451
==============================================================================
Omnibus:                        0.862   Durbin-Watson:                   2.162
Prob(Omnibus):                  0.650   Jarque-Bera (JB):                0.496
Skew:                           0.107   Prob(JB):                        0.780
Kurtosis:                       3.206   Cond. No.                         322.
==============================================================================

Notes:
[1] Standard Errors are heteroscedasticity robust (HC1)</code></pre>
</div>
</div>
</section>
<section id="to-be-continued" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="to-be-continued"><span class="header-section-number">4</span> TO BE CONTINUED</h2>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



<script src="Quarto documentation_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>